<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Datadog Fundamentals – Practice Exam</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background: #f7f9fc;
      margin: 0;
      padding: 20px;
    }
    .container {
      max-width: 900px;
      margin: auto;
      background: #fff;
      padding: 24px;
      border-radius: 8px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.1);
    }
    .question {
      margin-bottom: 20px;
      padding-bottom: 16px;
      border-bottom: 1px solid #e5e7eb;
    }
    .options label {
      display: block;
      margin: 6px 0;
      cursor: pointer;
    }
    button {
      background: #632ca6;
      color: #fff;
      border: none;
      padding: 10px 16px;
      border-radius: 6px;
      cursor: pointer;
      font-size: 14px;
    }
    button.secondary {
      background: #6b7280;
    }
    button.dark {
      background: #374151;
    }
  </style>
</head>
<body>

<div class="container">

  <strong>Select Question Set:</strong><br/>
  <button onclick="selectSet(0)">Set 1 – Agent & Core Fundamentals</button>
  <button onclick="selectSet(1)">Set 2 – Metrics, Timeseries & Aggregation</button>

  <h1>Datadog Fundamentals – Practice Exam</h1>
  <p>
    <strong>Free & open</strong> Datadog Fundamentals practice exam.
    No tracking, no backend.
  </p>

  <div id="quiz"></div>

  <div style="margin:16px 0;">
    <progress id="progress" value="0" max="75" style="width:100%;"></progress>
    <div id="progressText">0 / 75 answered</div>
  </div>

  <div style="display:flex; gap:8px; flex-wrap:wrap;">
    <button onclick="prevPage()">Previous</button>
    <button onclick="nextPage()">Next</button>
    <button onclick="resetQuiz()" class="secondary">Clear Answers</button>
    <button onclick="reloadSet()" class="dark">Refresh Set</button>
  </div>

</div>

<script>
/* =========================
   QUIZ DATA
   ========================= */

const quizSets = [
  {
    name: "Set 1 – Agent & Core Fundamentals",
    questions: [
      {
        q: "What is the primary purpose of the Datadog Agent?",
        options: [
          "Store metrics long-term",
          "Collect and forward telemetry data",
          "Create dashboards",
          "Trigger alerts"
        ],
        answer: [1]
      },
      {
        q: "Which key is required for the Datadog Agent to send data?",
        options: ["Application key", "OAuth token", "API key", "SSH key"],
        answer: [2]
      }
    ]
  },
  {
    name: "Set 2 – Metrics, Timeseries & Aggregation",
    questions: [
      {
        q: "What is a metric in Datadog?",
        options: [
          "A log entry",
          "A numerical value tracked over time",
          "An alert definition",
          "A dashboard widget"
        ],
        answer: [1]
      },
      {
        q: "Which metric type represents a point-in-time value?",
        options: ["Gauge", "Count", "Rate", "Histogram"],
        answer: [0]
      }
    ]
  }
];

/* =========================
   STATE
   ========================= */

const QUESTIONS_PER_PAGE = 10;
let currentSetIndex = 0;
let currentPage = 0;
let userAnswers = {};

const quizDiv = document.getElementById("quiz");
const progress = document.getElementById("progress");
const progressText = document.getElementById("progressText");

/* =========================
   FUNCTIONS
   ========================= */

function selectSet(index) {
  currentSetIndex = index;
  reloadSet();
}

function renderQuiz() {
  const questions = quizSets[currentSetIndex].questions;
  quizDiv.innerHTML = `<h2>${quizSets[currentSetIndex].name}</h2>`;

  const start = currentPage * QUESTIONS_PER_PAGE;
  const pageQuestions = questions.slice(start, start + QUESTIONS_PER_PAGE);

  pageQuestions.forEach((item, i) => {
    const qIndex = start + i;
    const div = document.createElement("div");
    div.className = "question";
    div.innerHTML = `<strong>Q${qIndex + 1}.</strong> ${item.q}`;

    const options = document.createElement("div");
    options.className = "options";

    item.options.forEach((opt, idx) => {
      const checked = userAnswers[qIndex]?.includes(idx) ? "checked" : "";
      options.innerHTML += `
        <label>
          <input type="radio" name="q${qIndex}" value="${idx}" ${checked}>
          ${opt}
        </label>`;
    });

    div.appendChild(options);
    quizDiv.appendChild(div);
  });

  updateProgress();
}

function updateProgress() {
  const total = quizSets[currentSetIndex].questions.length;
  const answered = Object.keys(userAnswers).length;
  progress.max = total;
  progress.value = answered;
  progressText.textContent = `${answered} / ${total} answered`;
}

function saveAnswers() {
  const questions = quizSets[currentSetIndex].questions;
  questions.forEach((_, i) => {
    const selected = document.querySelector(`input[name="q${i}"]:checked`);
    if (selected) userAnswers[i] = [parseInt(selected.value)];
  });
}

function nextPage() {
  saveAnswers();
  if ((currentPage + 1) * QUESTIONS_PER_PAGE <
      quizSets[currentSetIndex].questions.length) {
    currentPage++;
    renderQuiz();
  }
}

function prevPage() {
  saveAnswers();
  if (currentPage > 0) {
    currentPage--;
    renderQuiz();
  }
}

function resetQuiz() {
  userAnswers = {};
  renderQuiz();
}

function reloadSet() {
  currentPage = 0;
  userAnswers = {};
  renderQuiz();
}

/* =========================
   INITIAL LOAD
   ========================= */

renderQuiz();
</script>

</body>
</html>
